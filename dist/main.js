!function(t){var e={};function n(a){if(e[a])return e[a].exports;var r=e[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(a,r,function(e){return t[e]}.bind(null,r));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=1)}([function(t){t.exports=JSON.parse('[{"title":"Derelict","artist":"Trevino","url":"https://dj-gh.s3.amazonaws.com/01+Derelict.mp3"},{"title":"Departures","artist":"Closer Musik","url":"https://dj-gh.s3.amazonaws.com/02+Departures.mp3"},{"title":"Ferenc","artist":"Ricardo Villalobos","url":"https://dj-gh.s3.amazonaws.com/04+Ferenc.mp3"},{"title":"10","artist":"snd","url":"https://dj-gh.s3.amazonaws.com/10+10.mp3"},{"title":"King in My Empire","artist":"Rhythm & Sound","url":"https://dj-gh.s3.amazonaws.com/01+King+in+My+Empire.mp3"},{"title":"Reflector Pack (4/4)","artist":"Miss Modular","url":"https://dj-gh.s3.amazonaws.com/02+Reflector+Pack+(4_4).mp3"},{"title":"Bullied by Love","artist":"JK Flesh","url":"https://dj-gh.s3.amazonaws.com/1-03+Bullied+by+Love.mp3"},{"title":"In my dreams we\'re almost touching","artist":"Ricky Eat Acid","url":"https://dj-gh.s3.amazonaws.com/08+In+my+dreams+we\'re+almost+touching.mp3"},{"title":"Fall from a Height (The Field remix)","artist":"The Honeydrips","url":"https://dj-gh.s3.amazonaws.com/03+Fall+From+A+Height+-+The+Field+Way.mp3"}]')},function(t,e,n){"use strict";n.r(e);var a=function t(e,n,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.title=e,this.artist=n,this.url=a};function r(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var i=function(){function t(e,n,a){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.tracks=n,this.ac=e,this.rotateVar="--track-".concat(a,"-speed"),this.rotateClass="rotate".concat(a),this.paused=!0,this.speed=1,this.ppButton=document.getElementById("ppButton".concat(a)),this.recordImg=document.getElementById("record-img".concat(a)),this.titleText=document.getElementById("track-title".concat(a)),this.artistText=document.getElementById("track-artist".concat(a)),this.trackArea=document.getElementById("track-area".concat(a)),this.panNode=e.createStereoPanner(),this.gainNode=e.createGain(),this.gainNode.gain.value=1===a?1:0,document.getElementById("speed".concat(a)).addEventListener("input",(function(t){r.changeSpeed(t.currentTarget.value)})),document.getElementById("pan".concat(a)).addEventListener("input",(function(t){r.panNode.pan.value=t.currentTarget.value})),this.ppButton.addEventListener("click",(function(){r.playOrPause()})),this.trackArea.addEventListener("dragover",(function(t){t.preventDefault()})),this.trackArea.addEventListener("drop",(function(t){t.preventDefault();var e=r.tracks[t.dataTransfer.getData("text")];r.paused?r.changeTrack(e):(document.querySelector("#error-modal").style.display="block",document.querySelector("#modal-background").style.display="block")}))}var e,n,a;return e=t,(n=[{key:"changeTrack",value:function(t){var e=this;this.ppButton.setAttribute("disabled",!0),this.titleText.innerHTML="Loading",this.artistText.innerHTML="";var n=new Request(t.url);fetch(n).then((function(t){return t.arrayBuffer()})).then((function(t){return e.ac.decodeAudioData(t)})).then((function(n){e.buffer=n,e.reloadBuffer(),e.ppButton.removeAttribute("disabled"),e.titleText.innerHTML=t.title,e.artistText.innerHTML=t.artist}))}},{key:"reloadBuffer",value:function(){this.track=this.ac.createBufferSource(),this.track.buffer=this.buffer,this.track.connect(this.gainNode).connect(this.panNode).connect(this.ac.destination),this.changeSpeed(this.speed)}},{key:"changeSpeed",value:function(t){this.speed=t,this.track.playbackRate.value=t,document.documentElement.style.setProperty(this.rotateVar,"".concat(1/t,"s"))}},{key:"playOrPause",value:function(){this.paused?(this.recordImg.classList.add(this.rotateClass),this.track.start(),this.paused=!1):(this.recordImg.classList.remove(this.rotateClass),this.track.stop(),this.reloadBuffer(),this.paused=!0)}}])&&r(e.prototype,n),a&&r(e,a),t}(),o=n(0);document.addEventListener("DOMContentLoaded",(function(){var t=new(window.AudioContext||window.webkitAudioContext),e=o.map((function(t){var e=t.title,n=t.artist,r=t.url;return new a(e,n,r)})),n=new i(t,e,1),r=new i(t,e,2),c=document.getElementById("track-bank"),s=document.createElement("ul");e.forEach((function(t,e){var n=document.createElement("li");n.classList.add("track-listing"),n.setAttribute("draggable","true"),n.setAttribute("id",e);var a=document.createElement("div");a.classList.add("label"),a.innerText=t.title,n.appendChild(a),s.appendChild(n)})),c.appendChild(s),document.querySelectorAll(".track-listing").forEach((function(t){var e=new Image;e.src="./src/images/record_sleeve.png",t.addEventListener("dragstart",(function(n){n.dataTransfer.setData("text/plain",t.id),n.dataTransfer.setDragImage(e,150,150)}))})),document.querySelectorAll("button").forEach((function(e){e.addEventListener("click",(function(){"suspended"===t.state&&t.resume()}))})),document.getElementById("crossfader").addEventListener("input",(function(t){var e=t.currentTarget.value;n.gainNode.gain.value=1-e,r.gainNode.gain.value=e})),document.querySelector("#about-modal-button").addEventListener("click",(function(){document.querySelector("#about-modal").style.display="block",document.querySelector("#modal-background").style.display="block"})),document.querySelector("#instructions-modal-button").addEventListener("click",(function(){document.querySelector("#instructions-modal").style.display="block",document.querySelector("#modal-background").style.display="block"})),window.onclick=function(t){var e=t.target;e===document.getElementById("modal-background")&&(e.style.display="none",e.querySelectorAll(".modal").forEach((function(t){t.style.display="none"})))}}))}]);
//# sourceMappingURL=main.js.map